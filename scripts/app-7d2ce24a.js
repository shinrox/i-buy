(function(){angular.module("iBuy.vendors",["ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","ui.select","oitozero.ngSweetAlert","ngAnalytics","ngToast","angular-loading-bar"]),angular.module("iBuy.controllers",["iBuy.vendors"]),angular.module("iBuy.filters",["iBuy.vendors"]),angular.module("iBuy.factories",["iBuy.vendors"]),angular.module("iBuy.constants",["iBuy.vendors"]),angular.module("iBuy.services",["iBuy.vendors"]),angular.module("iBuy.directives",["iBuy.vendors"]),angular.module("iBuy.mocks",["iBuy.vendors"]),angular.module("iBuy.configs",["iBuy.vendors"]),angular.module("iBuy.providers",["iBuy.vendors"]),angular.module("iBuy.scripts",["iBuy.controllers","iBuy.constants","iBuy.filters","iBuy.factories","iBuy.services","iBuy.directives","iBuy.mocks","iBuy.providers","iBuy.configs"]),angular.module("iBuy",["iBuy.scripts","iBuy.vendors"])}).call(this),function(){angular.module("iBuy.services").service("CategoriesService",["CollectionsService",function(t){var r;return t.create(),r={all:function(){return t.categories.all()},get:function(r){return t.categories.get({_id:r})}}}])}.call(this),function(){angular.module("iBuy.controllers").controller("CategoriesController",["categories","CategoriesService",function(t,r){var e,n;return n=this,e=r,angular.extend(n,{categories:t}),this}])}.call(this),function(){angular.module("iBuy").config(["$httpProvider",function(t){var r;return r={"Content-type":"application/x-www-form-urlencoded"},t.defaults.transformRequest=function(t){return t?$.param(t,!0):t},t.defaults.headers.post=r,t.defaults.headers.put=r,t.defaults.headers["delete"]=r}])}.call(this),function(){angular.module("iBuy").config(["ngAnalyticsTrackersProvider","APP_ENV",function(t,r){return t.set({main:{UA:r.GA.MAIN}})}])}.call(this),function(){"use strict";angular.module("iBuy.configs").config(["cfpLoadingBarProvider",function(t){return t.includeSpinner=!1,t.latencyThreshold=250}])}.call(this),function(){"use strict";angular.module("iBuy.constants").constant("APP_ENV",window.ENV)}.call(this),function(){angular.module("ngAnalytics.services",[]),angular.module("ngAnalytics.providers",[]),angular.module("ngAnalytics.scripts",["ngAnalytics.services","ngAnalytics.providers"]),angular.module("ngAnalytics",["ngAnalytics.scripts"])}.call(this),function(){var t={}.hasOwnProperty;angular.module("ngAnalytics.services").service("GATracker",["ngAnalyticsTrackers","$window",function(r,e){var n;return n={ga:{send:function(t,r){var n,o;try{return e.ga(t.name+".send",r)}catch(o){return n=o,console.log("ngAnalytics.track error",n,t)}},set:function(t,r){var n,o;try{return e.ga(t.name+".set",r)}catch(o){return n=o,console.log("ngAnalytics.track error",n,t)}}},all:{send:function(e){var o,a,c;a=[];for(o in r)t.call(r,o)&&(c=r[o],a.push(n.ga.send(c,e)));return a},set:function(e){var o,a,c;a=[];for(o in r)t.call(r,o)&&(c=r[o],a.push(n.ga.set(c,e)));return a}},byName:{send:function(t,e){var o;return o=r[t],null!=o?n.ga.send(o,e):void 0},set:function(t,e){var o;return o=r[t],null!=o?n.ga.set(o,e):void 0}},setUser:function(t){return n.all.set({userId:"USER_"+t.id})},setPage:function(t){return n.all.set({page:t})},setAppVersion:function(e,o){var a,c,i,s;if(c={},null==o){i=[];for(a in r)t.call(r,a)&&(s=r[a],null!=s.versionDimension?(c[s.versionDimension]=e,i.push(n.ga.set(s,c))):i.push(void 0));return i}return s=r[o],null!=s&&null!=s.versionDimension?(c[s.versionDimension]=e,n.ga.set(s,c)):void 0},trackEvent:function(t,r){var e;return e={hitType:"event",eventValue:1},$.extend(!0,e,t),null!=r?n.byName.send(r,e):n.all.send(e)},trackView:function(t,r){var e;return e={hitType:"pageview"},$.extend(!0,e,t),null!=r?n.byName.send(r,e):n.all.send(e)}}}])}.call(this),function(){var t={}.hasOwnProperty;angular.module("ngAnalytics.providers").provider("ngAnalyticsTrackers",function(){var r,e,n;r=function(){return function(t,r,e,n,o,a,c){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,a=r.createElement(e),c=r.getElementsByTagName(e)[0],a.async=1,a.src=n,c.parentNode.insertBefore(a,c)}(window,document,"script","//www.google-analytics.com/analytics.js","ga")},r(),n={},e={createTracker:function(t){var r,e;try{return ga("create",t.UA,{name:t.name,cookieDomain:"none"})}catch(e){return r=e,console.log("ngAnalytics.createTracker error",r)}},init:function(){var r,o,a,c;r=0,a=[];for(o in n)t.call(n,o)&&(c=n[o],c.UA&&(null==c.name&&(c.name=""+o),r++,a.push(e.createTracker(c))));return a}},this.set=function(t){return n=$.extend(!0,n,t),e.init()},this.$get=[function(){return n}]})}.call(this),function(){angular.module("iBuy.services").service("ProductsService",["CollectionsService",function(t){var r;return t.create(),r={all:function(){return t.products.all()},get:function(r){return t.products.getByCategory(r)},getById:function(r){return t.products.getById(r)}}}])}.call(this),function(){angular.module("iBuy").config(["$stateProvider","$urlRouterProvider",function(t){var r;return r="app/features/products",t.state("products",{url:"/products/:category",templateUrl:r+"/list/template.html",controller:"ProductsController as ctrl",resolve:{products:["$stateParams","ProductsService",function(t,r){return r.get(t.category)}],categories:["CategoriesService",function(t){return t.all()}]}})}])}.call(this),function(){angular.module("iBuy").controller("ProductsController",["$stateParams","products","ProductsService","CartService","UserService","categories",function(t,r,e,n,o,a){var c,i;return i=this,c=e,angular.extend(i,{categories:a,products:r}),i.currentUser=o.current,"CREATED"!==i.currentUser.cart.status&&angular.extend(i.currentUser.cart,o.newCart()),i.addToCart=function(r){return n.add(r),i.products=e.get(t.category)},this}])}.call(this),function(){angular.module("iBuy.services").service("ProductService",["CollectionsService",function(t){var r;return t.create(),r={get:function(r){return t.products.getById(r)}}}])}.call(this),function(){angular.module("iBuy").config(["$stateProvider","$urlRouterProvider",function(t){var r;return r="app/features/products",t.state("product",{url:"/product/{id:int}",templateUrl:r+"/item/template.html",controller:"ProductItemController as ctrl",resolve:{product:["$stateParams","ProductsService",function(t,r){return r.getById(t.id)}]}})}])}.call(this),function(){angular.module("iBuy").controller("ProductItemController",["$stateParams","product","ProductsService","CartService","UserService","CollectionsService",function(t,r,e,n,o,a){var c,i;return i=this,c=e,angular.extend(i,{product:r}),i.currentUser=o.current,i.product=r,i.hasProduct=function(){return i.availableCount()>0},i.availableCount=function(){return a.products.available(r)},i.addToCart=function(r){return n.add(r),i.product=e.getById(t.id)},this}])}.call(this),function(){angular.module("iBuy").config(["$stateProvider","$urlRouterProvider",function(t,r){var e;return e="app/features/home",t.state("home",{url:"/",resolve:{categories:["CategoriesService",function(t){return t.all()}]},views:{"@":{templateUrl:e+"/index/template.html",controller:"HomeController as ctrl"},"categories@home":{templateUrl:e+"/subviews/categories/template.html",controller:"CategoriesController as ctrl"}}}),r.otherwise("/")}])}.call(this),function(){angular.module("iBuy.controllers").controller("HomeController",["$scope",function(){}])}.call(this),function(){angular.module("iBuy.filters").filter("parenthesis",function(){return function(t,r){return t instanceof Object&&null!=t[r]?"("+t[r]+")":""}})}.call(this),function(){angular.module("iBuy").directive("autoFocus",["$timeout",function(t){return function(r,e,n){return r.$watch(n.autoFocus,function(r){return t(function(){return r&&e.focus()})},!0)}}])}.call(this),function(){angular.module("iBuy.services").service("alphanumSort",function(){var t;return t=function(t,r){var e,n,o,a,c;if(null==t||null==r)return 0;for(e=t.toString().toUpperCase().split(/(\d+)/),n=r.toString().toUpperCase().split(/(\d+)/),c=0;c<Math.max(e.length,n.length);){if(e[c]!==n[c])return o=isNaN(parseInt(e[c],10))?e[c]:parseInt(e[c],10),a=isNaN(parseInt(n[c],10))?n[c]:parseInt(n[c],10),null==o||null==a?e.length-n.length:a>o?-1:1;c++}return 0}})}.call(this),function(){angular.module("iBuy.directives").directive("productThumb",function(){var t;return t={restrict:"AE",replace:!0,scope:{product:"="},templateUrl:"app/components/product/thumb/template.html",controller:"ProductThumbController as ctrl"}})}.call(this),function(){angular.module("iBuy").controller("ProductThumbController",["$state","$scope","$uibModal",function(t,r,e){var n;return n=this,n.actions={open:function(){return t.go("products.detail",{id:r.product._id})},open:function(){var t;return t=e.open({templateUrl:"app/components/product/modal/template.html",controller:"ProductModalController as ctrl",resolve:{product:function(){return r.product}}})}},this}])}.call(this),function(){angular.module("iBuy.directives").directive("productPreview",function(){var t;return t={restrict:"AE",replace:!0,scope:{product:"="},templateUrl:"app/components/product/preview/template.html"}})}.call(this),function(){angular.module("iBuy").controller("ProductModalController",["$modalInstance","product","CollectionsService",function(t,r,e){var n;return n=this,n.product=r,n.hasProduct=function(){return n.availableCount()>0},n.availableCount=function(){return e.products.available(r)},n.actions={close:function(){return t.close()}},this}])}.call(this),function(){angular.module("iBuy.controllers").controller("LoginController",["UserService","$modalInstance","sAlert","CartService",function(t,r,e,n){var o;return o=this,o.user={email:null,password:null},o.register=!1,o.actions={close:function(){return r.close()},"continue":function(){return o.register?o.actions.register():o.actions.login()},register:function(){var r,n;return r=t.register(o.user),r.then(function(){return o.register=!1}),n=function(){return e.error({title:"Ops!",text:"Login já cadastrado, por favor tente novamente."})},r["catch"](n)},login:function(){var a,c,i;return a=angular.copy(t.current.cart),c=t.login(o.user),c.then(function(){return angular.extend(t.current.cart,a),t.save(),n.load(),r.close()}),i=function(){return e.error({title:"Ops!",text:"Usuário/senha inválidos, por favor tente novamente ou registre-se."})},c["catch"](i)}},this}])}.call(this),function(){angular.module("iBuy.services").service("UserService",["$q",function(t){var r;return r={newCart:function(){var t;return t={_id:(new Date).getTime(),status:"CREATED",products:{},productsCount:0,currentTotal:0}},register:function(e){var n,o,a;return a=simpleStorage.get("availableUsers")||{},n=t.defer(),o=a[e.login],null==o&&"anonymous"!==e.login?(a[e.login]=angular.extend(e,{shoppings:[],cart:r.newCart()}),simpleStorage.set("availableUsers",a),n.resolve(e)):n.reject("user.already.exists"),n.promise},save:function(){var t,e;return e=simpleStorage.get("availableUsers")||{},t=e[r.current.login],null!=t?(e[r.current.login]=r.current,simpleStorage.set("availableUsers",e),simpleStorage.set("currentUser",r.current)):"anonymous"===r.current.login?simpleStorage.set("anonymousUser",r.current):void 0},login:function(e){var n,o,a;return a=simpleStorage.get("availableUsers")||{},n=t.defer(),o=a[e.login],null!=o&&o.password===e.password?(angular.extend(r.current,o),simpleStorage.set("currentUser",r.current),r.logged=!0,n.resolve(o)):n.reject("user.not.found"),n.promise},currentUser:function(){var t,e;return e={login:"anonymous",cart:r.newCart()},t=simpleStorage.get("currentUser"),r.logged=null!=t,r.logged||angular.extend(e,simpleStorage.get("anonymousUser")),angular.extend(r.current,e,t),r.current},current:{},logged:!1,logout:function(){var e;return e=t.defer(),simpleStorage.deleteKey("currentUser"),r.logged=!1,angular.extend(r.current,simpleStorage.get("anonymousUser")),e.resolve(),e.promise}}}])}.call(this),function(){var t={}.hasOwnProperty;angular.module("iBuy.services").service("ShoppingsService",["UserService","$filter","CollectionsService",function(r,e,n){var o,a;return o=e("filter"),a={save:function(){return r.save()},remove:function(e){var o,a,c,i,s,l;if("PAID"===e.status)return!1;if(l=r.current,o=_.findIndex(l.shoppings,{_id:e._id}),-1!==o){e=l.shoppings[o],i=e.products;for(a in i)t.call(i,a)&&(c=i[a],n.products.retrieve(c,c.count));l.shoppings.splice(o,1)}else{s=l.cart.products;for(a in s)t.call(s,a)&&(c=s[a],n.products.retrieve(c,c.count));angular.extend(l.cart,r.newCart())}return r.save()},create:function(){var t,e;return e=r.current,t=angular.copy(e.cart),t.status="CREATED",t._id=(new Date).getTime(),e.shoppings.push(e.cart),r.save()},pay:function(t){return t.status="PAID",r.save()}}}])}.call(this),function(){angular.module("iBuy").config(["$stateProvider","$urlRouterProvider",function(t){var r;return r="app/features/shoppings",t.state("shoppings",{url:"/shoppings",templateUrl:r+"/template.html",controller:"ShoppingsController as ctrl",resolve:{user:["$q","$state","UserService",function(t,r,e){var n;return n=t.defer(),"anonymous"===e.currentUser().login?(r.go("home"),n.reject()):n.resolve(),n.promise}]}})}])}.call(this),function(){var t={}.hasOwnProperty;angular.module("iBuy.controllers").controller("ShoppingsController",["ShoppingsService","UserService","CartService","user","$filter","sAlert",function(r,e,n,o,a,c){var i,s,l,u,p;i=this,s=a("filter"),i.currentUser=e.current,i.currentUser.cart.productsCount>0&&n.updateStatus(i.currentUser.cart.status),i.status={ALL:"Todas",CREATED:"Em andamento",WAITING:"Aguardando pagamento",PAID:"Finalizada"},i.filters=[],u=i.status;for(l in u)t.call(u,l)&&(p=u[l],i.filters.push({status:l,name:p}));return i.currentFilter=i.filters[0],i.currentShoppings=i.currentUser.shoppings,i.actions={filterBy:function(t){return i.currentFilter=t,i.currentShoppings=s(i.currentUser.shoppings,{status:"ALL"!==t.status?t.status:void 0})},pay:function(t){return r.pay(t),i.actions.filterBy(i.currentFilter),t._id===i.currentUser.cart._id?n.clearCart():void 0},remove:function(t){return c.confirm({text:"Certeza que deseja apagar esta compra?",closeOnConfirm:!0},function(e){return e&&(r.remove(t),i.actions.filterBy(i.currentFilter),t._id===i.currentUser.cart._id)?n.clearCart():void 0})}},this}])}.call(this),function(){angular.module("iBuy").config(["$httpProvider","$provide",function(t,r){return r.factory("UserLoginInterceptor",["$q","$injector","$rootScope","APP_ENV",function(t,r){return{request:function(t){return t},requestError:function(r){return t.reject(r)},response:function(r){return r||t.when(r)},responseError:function(e){return 401===e.status&&r.invoke(["$state","$rootScope",function(t,r){return r.user=null,t.go("login.auth",{statusOrigin:{status:e.status}})}]),t.reject(e)}}}]),t.interceptors.push("UserLoginInterceptor")}]).run(["$rootScope",function(t){return t.$on("$stateChangeSuccess",function(r,e,n,o){return t.state=e,t.lastState=o})}])}.call(this),function(){angular.module("iBuy.services").service("CollectionsService",["$filter",function(t){var r,e,n,o;return e=t("filter"),r=1,n={products:function(t){var e,n,o,a,c;for(c=[],e="Officia et cupidatat consequat reprehenderit do qui velit\n anim magna sint minim qui ullamco.\n Ex amet cupidatat non deserunt.\n Lorem nulla irure ex do amet irure.",o=n=1;10>=n;o=++n)a={_id:r,about:e,name:"Produto "+t.name.toLowerCase()+" "+o,preview:"http://lorempixel.com/640/480/"+t.type+"/"+o,price:parseFloat(Math.min(100+2900*Math.random(),3e3).toFixed(2)),quantity:Math.floor(25*Math.random())+10,thumb:"http://lorempixel.com/250/250/"+t.type+"/"+o,category:t,sold:0},r++,c.push(a);return c},category:function(t,r,e){var n;return n={_id:1,image:"cat"+t+".jpg",name:r,type:e}}},o={create:function(){var t,r,e,o,a,c,i;if(c=simpleStorage.get("CategoriesCollection"),t=[n.category(1,"Tecnologia","technics"),n.category(2,"Esportes","sports"),n.category(3,"Quadros","abstract")],null==c&&simpleStorage.set("CategoriesCollection",t),i=simpleStorage.get("ProductsCollection"),null==i){for(a=[],e=0,o=t.length;o>e;e++)r=t[e],a=a.concat(n.products(r));return simpleStorage.set("ProductsCollection",a)}},products:{all:function(){return simpleStorage.get("ProductsCollection")},getByCategory:function(t){var r,n;return r=o.products.all(),""===t||"all"===t?r:n=e(r,function(r){return r.category.type===t})},getById:function(t){var r,n;return r=o.products.all(),n=e(r,{_id:t},!0)[0]},sell:function(t,r){var e,n,a;return a=o.products.all(),e=_.findIndex(a,{_id:t._id}),n=a[e],null!=n?(n.sold+=r,simpleStorage.set("ProductsCollection",a)):void 0},retrieve:function(t,r){var e,n,a;return a=o.products.all(),e=_.findIndex(a,{_id:t._id}),n=a[e],null!=n?(n.sold-=r,simpleStorage.set("ProductsCollection",a)):void 0},available:function(t){var r,n;return n=o.products.all(),r=e(n,{_id:t._id},!0)[0],null!=r?r.quantity-r.sold:0}},categories:{all:function(){return simpleStorage.get("CategoriesCollection")}}}}])}.call(this),function(){var t={}.hasOwnProperty;angular.module("iBuy.services").service("CartService",["UserService","ShoppingsService","CollectionsService",function(r,e,n){var o;return o={calcTotal:function(){var e,n,o,a,c,i;i=r.current,c=0,o=0,a=i.cart.products;for(e in a)t.call(a,e)&&(n=a[e],o+=n.count,c+=n.price*n.count);return i.cart.productsCount=o,i.cart.currentTotal=parseFloat(c).toFixed(2)},clearCart:function(t){return t=r.current,angular.extend(t.cart,{_id:(new Date).getTime(),status:"CREATED",products:{},productsCount:0,currentTotal:0})},updateCart:function(){return o.calcTotal(),r.save()},add:function(t,e){var a,c;return null==e&&(e=1),c=r.current,"PAID"===c.cart.status&&angular.extend(c.cart,r.newCart()),a=c.cart.products[t._id],null!=a?a.count+=e:(t.count=e,c.cart.products[t._id]=t),n.products.sell(t,e),o.updateCart()},remove:function(t,e){var a,c;return null==e&&(e=1),c=r.current,a=c.cart.products[t._id],null!=a&&(a.count-=e,a.count<=0&&delete c.cart.products[t._id]),n.products.retrieve(t,e),o.updateCart()},load:function(){return r.currentUser(),o.updateCart()},updateStatus:function(t){var e,n;return n=r.current,e=_.findIndex(n.shoppings,{_id:n.cart._id}),e>-1?(n.cart.status=t,n.shoppings[e]=angular.copy(n.cart)):(n.cart.status=t,n.shoppings.push(angular.copy(n.cart))),r.save()},finish:function(t){var e,n;return n=r.current,e=_.findIndex(n.shoppings,{_id:n.cart._id}),e>-1?t?o.updateStatus(n.cart.status):(o.updateStatus("WAITING"),o.clearCart()):o.updateStatus("CREATED"),t||o.clearCart(),r.save()},setCurrent:function(t){var e,n;return n=r.current,n.cart._id!==t&&(n.cart.productsCount>0&&o.updateStatus(n.cart.status),e=_.findIndex(n.shoppings,{_id:t}),angular.extend(n.cart,n.shoppings[e])),r.save()}},o.load(),o}])}.call(this),function(){angular.module("iBuy").config(["$stateProvider","$urlRouterProvider",function(t){var r;return r="app/features/cart",t.state("cart",{url:"/cart/{id:int}",templateUrl:r+"/template.html",controller:"CartController as ctrl",resolve:{cart:["$stateParams","CartService",function(t,r){return r.setCurrent(t.id)}]}})}])}.call(this),function(){angular.module("iBuy.controllers").controller("CartController",["$state","ShoppingsService","CartService","UserService","$uibModal","sAlert","CollectionsService",function(t,r,e,n,o,a,c){var i;return i=this,i.currentUser=n.currentUser(),i.productAvailable=function(t){return c.products.available(t)>0},i.actions={finish:function(){return"anonymous"!==i.currentUser.login?e.updateStatus("WAITING"):i.actions.openLogin()},openLogin:function(){var t;return t=o.open({templateUrl:"app/components/login/modal/template.html",controller:"LoginController as ctrl"})},productZoom:function(t){var r;return r=o.open({templateUrl:"app/components/product/modal/template.html",controller:"ProductModalController as ctrl",resolve:{product:function(){return t}}})},add:function(t){return e.add(t)},remove:function(t,r){return e.remove(t,r)},open:function(){return e.updateStatus("CREATED"),t.go("products",{category:"all"})},pay:function(){return e.updateStatus("PAID")},removeShopping:function(){return a.confirm({text:"Certeza que deseja apagar esta compra?",closeOnConfirm:!0},function(n){return n?(r.remove(i.currentUser.cart),t.go("home"),e.clearCart()):void 0})}},this}])}.call(this),function(){angular.module("iBuy.factories").factory("sAlert",["$timeout","SweetAlert","$window",function(t,r,e){var n;return n={close:function(){return t(function(){return swal.close()})},open:function(e,n){var o;return null==e&&(e={}),o={type:"info",title:"Processando...",text:"Por favor aguarde.",showCancelButton:!1,cancelButtonText:"Cancelar",confirmButtonColor:"#2196f3",confirmButtonText:"Ok",closeOnConfirm:null==n},o=$.extend(!0,o,e),t(function(){return r.swal(o,n)})},showInputError:function(t){return e.swal.showInputError(t)},success:function(t,r){var e;return null==t&&(t={}),e={type:"success"},n.open($.extend(!0,e,t),r)},error:function(t,r){var e;return null==t&&(t={}),e={title:"Ops!",text:"Um erro inesperado ocorreu, por favor tente novamente.",type:"error",showConfirmButton:!0,closeOnConfirm:!0},n.open($.extend(!0,e,t),r)},warning:function(r,e){var o;return null==r&&(r={}),o={title:"Ops!",type:"warning"},t(function(){return n.open($.extend(!0,o,r),e)})},info:function(t,r){var e;return null==t&&(t={}),e={type:"info",showCancelButton:!1,showConfirmButton:!1},n.open($.extend(!0,e,t),r)},confirm:function(t,r){var e;return null==t&&(t={}),e={title:"Tem certeza?",text:"Por favor confirme antes de continuar.",showCancelButton:!0,confirmButtonColor:"#d84242",confirmButtonText:"Sim, continuar."},n.open($.extend(!0,e,t),r)},input:function(t,r){var e;return null==t&&(t={}),e={title:"",type:"input",text:"",showCancelButton:!0,confirmButtonColor:"#2196f3",confirmButtonText:"Ok"},n.open($.extend(!0,e,t),r)}}}])}.call(this),function(){angular.module("iBuy.directives").directive("navBar",function(){return{restrict:"EA",scope:{},replace:!0,templateUrl:"app/components/navbar/template.html",controller:"NavBarCtrl as ctrl"}})}.call(this),function(){angular.module("iBuy.controllers").controller("NavBarCtrl",["$scope","$document","UserService","$uibModal","CartService","$state",function(t,r,e,n,o,a){var c;return c=this,e.currentUser(),c.UserService=e,r.on("scroll",function(){return c.headerClass=r.scrollTop()>30?"small":"big",t.$apply()}),c.headerClass=r.scrollTop()>30?"small":"big",c.currentUser=e.current,c.actions={openLogin:function(){var t;return t=n.open({templateUrl:"app/components/login/modal/template.html",controller:"LoginController as ctrl"})},goToCart:function(){return a.is("cart")?void 0:("CREATED"!==c.currentUser.cart.status&&angular.extend(c.currentUser.cart,e.newCart()),a.go("cart",{id:c.currentUser.cart._id}))},logout:function(){return c.currentUser.cart.productsCount>0&&o.updateStatus(c.currentUser.cart.status),e.logout(),o.clearCart()}},this}])}.call(this),angular.module("iBuy").run(["$templateCache",function(t){t.put("app/components/navbar/template.html",'<div id="header" class="light-text" role="navigation" ng-class="ctrl.headerClass"><div class="logo-wrapper pull-left" title="iBuy"><a ui-sref="home" class="light-text no-decoration"><span class="logo"></span></a></div><div class="user pull-right"><div class="user-wrapper" ng-if="ctrl.UserService.logged"><span ng-bind="ctrl.currentUser.name"></span> &nbsp;|&nbsp; <a class="light-text" ng-click="ctrl.actions.logout()" title="Sair">Sair</a></div><div class="user-wrapper" ng-if="!ctrl.UserService.logged"><a ng-click="ctrl.actions.openLogin()" class="light-text" title="Login">Login</a></div></div><div class="pull-right cart-info" ng-click="ctrl.actions.goToCart()" ng-class="{\'empty\': (ctrl.currentUser.cart.productsCount == 0 || ctrl.currentUser.cart.status != \'CREATED\')}" title="Visualizar carrinho"><div class="cart-icon"><span class="glyphicon glyphicon-shopping-cart"></span> <span class="badge" ng-bind="ctrl.currentUser.cart.productsCount"></span> <span class="cart-total" ng-bind=\'ctrl.currentUser.cart.currentTotal | currency:"R$"\'></span></div></div><div class="pull-right link" ng-if="ctrl.UserService.logged" title="Minhas compras" ui-sref-active="active"><a class="light-text no-decoration" ui-sref="shoppings">Minhas compras</a></div><div class="pull-right link" title="Produtos" ui-sref-active="active"><a class="light-text no-decoration" ui-sref="products({category: \'all\'})">Produtos</a></div></div>'),t.put("app/features/cart/template.html",'<div class="cart-list"><h3>Carrinho <span ng-if="ctrl.currentUser.cart.productsCount > 0">| Pedido #{{ctrl.currentUser.cart._id}}</span></h3><ul class="text-left list container-fluid"><li class="text-center row" ng-if="!ctrl.currentUser.cart.productsCount > 0">Você não tem nenhum item no carrinho, <a ui-sref="products({category: \'all\'})">clique aqui</a> e comece a adicionar produtos.</li><li ng-if="ctrl.currentUser.cart.productsCount > 0" class="header row"><span class="info name col-xs-3 col-sm-3 col-md-3 col-lg-3">Produto</span> <span class="info quantity text-center col-xs-3 col-sm-3 col-md-3 col-lg-3">Qtd.</span> <span class="info price text-center col-xs-2 col-sm-2 col-md-2 col-lg-2">Preço Und.</span> <span class="info total text-center col-xs-2 col-sm-2 col-md-2 col-lg-2">Total</span> <span class="info actions text-center col-xs-2 col-sm-2 col-md-2 col-lg-2" ng-if=\'ctrl.currentUser.cart.status != "PAID"\'>Ações</span></li><li ng-if="ctrl.currentUser.cart.productsCount > 0" ng-repeat="(key, product) in ctrl.currentUser.cart.products" class="row"><a class="action info name col-xs-3 col-sm-3 col-md-3 col-lg-3" ui-sref="product({id: product._id})" ng-bind="product.name"></a> <span class="info quantity text-center col-xs-3 col-sm-3 col-md-3 col-lg-3"><button class="pull-left btn btn-default icon" ng-click="ctrl.actions.remove(product, 1)" ng-if=\'ctrl.currentUser.cart.status != "PAID"\'>-</button> <span class="count" ng-bind="product.count"></span> <button ng-if=\'ctrl.currentUser.cart.status != "PAID"\' ng-disabled="!ctrl.productAvailable(product)" class="btn pull-right btn-default icon" ng-click="ctrl.actions.add(product, 1)">+</button></span> <span class="info price text-center col-xs-2 col-sm-2 col-md-2 col-lg-2" ng-bind=\'product.price | currency:"R$"\'></span> <span class="info total text-center col-xs-2 col-sm-2 col-md-2 col-lg-2" ng-bind=\'(product.price * product.count) | currency:"R$"\'></span> <span class="info actions text-center col-xs-2 col-sm-2 col-md-2 col-lg-2" ng-if=\'ctrl.currentUser.cart.status != "PAID"\'><span class="action" ng-click="ctrl.actions.remove(product, product.count)">Remover tudo</span></span></li></ul><div class="row" ng-if="ctrl.currentUser.cart.productsCount > 0"><button class="btn btn-success" ng-if=\'ctrl.currentUser.cart.status == "CREATED"\' ng-click="ctrl.actions.finish()">Finalizar compra</button> <button class="btn btn-success" ng-if=\'ctrl.currentUser.cart.status == "WAITING"\' ng-click="ctrl.actions.pay()">Efetuar pagamento</button> <button class="btn btn-success" ng-if=\'ctrl.currentUser.cart.status == "PAID"\' ui-sref="shoppings">Minhas compras</button> <button ng-if=\'ctrl.currentUser.cart.status != "PAID"\' class="btn btn-primary" ng-click="ctrl.actions.open()">Adicionar mais produtos</button> <button ng-if=\'ctrl.currentUser.cart.status != "PAID"\' class="btn btn-danger" ng-click="ctrl.actions.removeShopping()">Excluir</button></div></div>'),t.put("app/features/shoppings/template.html",'<div class="sidebar"><div class="btn-group-vertical"><button ng-repeat="filter in ctrl.filters" ng-click="ctrl.actions.filterBy(filter)" type="button" class="btn btn-default" ng-class="{active: (ctrl.currentFilter == filter)}" ng-bind="filter.name"></button></div></div><div class="shoppings-list"><h3>Exibindo: <span ng-bind="ctrl.currentFilter.name"></span></h3><ul class="text-left list container-fluid"><li class="text-center row" ng-if="!ctrl.currentShoppings.length > 0 && ctrl.currentUser.shoppings.length > 0"><p>Nenhum item encontrado.</p></li><li class="text-center row" ng-if="!ctrl.currentUser.shoppings.length > 0"><p>Você não tem nenhuma compra efetuada, <a ui-sref="products({category: \'all\'})">clique aqui</a> e comece a adicionar produtos ao seu carrinho.</p></li><li ng-if="ctrl.currentShoppings.length > 0" class="header row"><span class="info quantity col-xs-2 col-sm-2 col-md-2 col-lg-2">Qtd.</span> <span class="info total col-xs-4 col-sm-4 col-md-4 col-lg-4">Total</span> <span class="info status col-xs-3 col-sm-3 col-md-3 col-lg-3">Status</span> <span class="info actions col-xs-3 col-sm-3 col-md-3 col-lg-3">Ações</span></li><li class="row" ng-repeat="shopping in ctrl.currentShoppings"><span class="info quantity col-xs-2 col-sm-2 col-md-2 col-lg-2" ng-bind="shopping.productsCount"></span> <span class="info total col-xs-4 col-sm-4 col-md-4 col-lg-4" ng-bind=\'shopping.currentTotal | currency:"R$"\'></span> <span class="info status col-xs-3 col-sm-3 col-md-3 col-lg-3" ng-bind="ctrl.status[shopping.status]"></span> <span class="info actions col-xs-3 col-sm-3 col-md-3 col-lg-3"><span class="action glyphicon glyphicon-trash" ng-click="ctrl.actions.remove(shopping)" ng-if="shopping.status != \'PAID\'"></span> <span class="action glyphicon glyphicon-eye-open" ui-sref="cart({id: shopping._id})"></span> <span class="action glyphicon glyphicon-usd" ng-click="ctrl.actions.pay(shopping)" ng-if="shopping.status == \'WAITING\'"></span></span></li></ul></div>'),t.put("app/components/login/modal/template.html",'<div class="modal-header"><h3 ng-if="!ctrl.register">Login <span class="close pull-right" ng-click="ctrl.actions.close()">X</span></h3><h3 ng-if="ctrl.register">Registrar <span class="close pull-right" ng-click="ctrl.actions.close()">X</span></h3></div><div class="modal-body"><form ng-submit="ctrl.actions.continue()" name="loginForm"><div ng-if="ctrl.register"><div class="form-group"><label for="name">Nome</label> <input class="form-control" type="text" ng-model="ctrl.user.name" name="name" required="true" id="name" placeholder="Nome"><div ng-if="!loginForm.name.$pristine && loginForm.name.$invalid" ng-messages="loginForm.name.$error" style="color:maroon" role="alert"><div ng-message="required">Campo obrigatório</div></div></div></div><div class="form-group"><label for="login">Usuário/login</label> <input class="form-control" type="text" ng-model="ctrl.user.login" name="email" required="true" id="login" placeholder="Usuário"><div ng-if="!loginForm.email.$pristine && loginForm.email.$invalid" ng-messages="loginForm.email.$error" style="color:maroon" role="alert"><div ng-message="required">Campo obrigatório</div></div></div><div class="form-group"><label for="password">Senha</label> <input class="form-control" type="password" ng-model="ctrl.user.password" name="password" required="true" id="password" placeholder="Senha"><div ng-if="!loginForm.password.$pristine && loginForm.password.$invalid" ng-messages="loginForm.password.$error" style="color:maroon" role="alert"><div ng-message="required">Campo obrigatório</div></div></div><button class="btn btn-success" type="submit" ng-disabled="loginForm.$invalid"><span ng-if="!ctrl.register">Login</span> <span ng-if="ctrl.register">Registrar-se</span></button> <a ng-if="!ctrl.register" ng-click="ctrl.register = true" class="pull-right register">Registre-se</a> <a ng-if="ctrl.register" ng-click="ctrl.register = false" class="pull-right register">Cancelar</a></form></div>'),t.put("app/components/product/modal/template.html",'<div class="modal-header"><h3 class="modal-title"><span ng-bind="ctrl.product.name"></span> <a class="pull-right" ng-click="ctrl.actions.close()">X</a></h3></div><div class="modal-body product-modal"><div product-preview="" product="ctrl.product"></div><div><p>Informações do produto</p><p class="product-info" ng-bind="ctrl.product.about"></p><p>Preço: <span ng-bind=\'ctrl.product.price | currency: "R$"\'></span></p><p ng-if="ctrl.hasProduct()"><span ng-bind="ctrl.availableCount()"></span> em estoque</p><p ng-if="!ctrl.hasProduct()">Produto esgotado</p></div></div>'),t.put("app/components/product/preview/template.html",'<div class="preview"><img alt="product.name" ng-src="{{product.preview}}"></div>'),t.put("app/components/product/thumb/template.html",'<div class="thumb" ui-sref="product({id: product._id})"><img alt="product.name" ng-src="{{product.thumb}}"></div>'),t.put("app/features/home/index/template.html",'<div ui-view="categories" class="view"></div>'),t.put("app/features/products/item/template.html",'<div class="products-view view"><h3 class="title" ng-bind="ctrl.product.name"></h3><div product-preview="" product="ctrl.product"></div><div class="info"><p class="info-label">Informações do produto</p><p class="product-info" ng-bind="ctrl.product.about"></p><p><span class="info-label">Preço:</span> <span ng-bind=\'ctrl.product.price | currency: "R$"\'></span></p><p ng-if="ctrl.hasProduct()"><span ng-bind="ctrl.availableCount()"></span> em estoque</p><p ng-if="!ctrl.hasProduct()">Produto esgotado</p><div class="cart-info"><p><span ng-bind="ctrl.currentUser.cart.products[ctrl.product._id].count || 0"></span> no carrinho</p><button ng-if="ctrl.hasProduct()" class="btn btn-primary" ng-click="ctrl.addToCart(ctrl.product)">+ Adicionar ao carrinho</button></div></div></div>'),t.put("app/features/products/list/template.html",'<div class="categories-filter"><ul><li class="category-link" ui-sref-active="active"><a ui-sref="products({category: \'all\'})">Todos</a></li><li ng-repeat="category in ctrl.categories" ui-sref-active="active"><a ui-sref="products({category: category.type})" ng-bind="category.name"></a></li></ul></div><div class="products-list view"><ul><li ng-repeat="product in ctrl.products"><div product-thumb="" product="product"></div><span ng-bind="product.name"></span><br><span ng-bind=\'product.price | currency:"R$"\'></span><br><a ng-click="ctrl.addToCart(product)" ng-if="product.quantity > product.sold">+ Adicionar ao carrinho</a> <a class="unavailable no-decoration" ng-if="product.quantity == product.sold">Esgotado</a></li></ul></div>'),t.put("app/features/home/subviews/categories/template.html",'<div class="list"><ul><li ng-repeat="category in ctrl.categories" ui-sref="products({category: category.type})" title="{{category.name}}"><div class="inner-shadow"><img ng-src="assets/images/{{category.image}}" alt="category.name"></div><div class="info light-text"><p ng-bind="category.name"></p></div></li></ul></div>')
}]);